
<textarea name="code" class="java" style="display:none;">
final Reader reader = new XmlReader(new XmlReaderConfig() {
    {
        setRecord("contact");
        setSuccess("@success");
    }
}, new RecordDef(new Field[]{
        new StringField("first", "name/first"),
        new StringField("last", "name/last"),
        new StringField("company"),
        new StringField("email"),
        new StringField("state"),
        new com.gwtext.client.data.DateField("dob", "dob", "m/d/Y")}));

final XmlReader errorReader = new XmlReader(new XmlReaderConfig() {
    {
        setRecord("field");
        setSuccess("@success");
    }
}, new RecordDef(new Field[]{
        new StringField("id"),
        new StringField("msg")
}));

final Form form = new Form("form-ct11", new FormConfig() {
    {
        setLabelAlign("right");
        setHeader("XML Form");
        setWidth(400);
        setLabelWidth(75);
        setSurrondWithBox(true);
        setReader(reader);
        setErrorReader(errorReader);
    }
});

form.fieldset(new FieldSetConfig() {
    {
        setLegend("Contact Information");
    }
});
form.add(new TextField(new TextFieldConfig() {
    {
        setFieldLabel("First Name");
        setName("first");
        setWidth(190);
    }
}));
form.add(new TextField(new TextFieldConfig() {
    {
        setFieldLabel("Last Name");
        setName("last");
        setWidth(190);
    }
}));

form.add(new TextField(new TextFieldConfig() {
    {
        setFieldLabel("Company");
        setName("company");
        setWidth(190);
    }
}));
form.add(new TextField(new TextFieldConfig() {
    {
        setFieldLabel("Email");
        setName("email");
        setVtype(VType.EMAIL);
        setWidth(190);
    }
}));

MemoryProxy proxy = new MemoryProxy(SampleData.getStates());

Reader cbReader = new ArrayReader(new RecordDef(
        new Field[]{
                new StringField("abbr", "0"),
                new StringField("state", "1")
        })
);

final Store store = new Store(proxy, cbReader);
store.load();

form.add(new ComboBox(new ComboBoxConfig() {
    {
        setFieldLabel("State");
        setHiddenName("state");
        setStore(store);
        setDisplayField("abbr");
        setTpl(new Template("<div class=search-item>" +
                "<b><span>{abbr}</b> - {state}" +
                "</div>"));
        setTypeAhead(true);
        setMode("local");
        setTriggerAction("all");
        setEmptyText("Select a state...");
        setSelectOnFocus(true);
        setWidth(190);
    }
}));

form.add(new com.gwtext.client.widgets.form.DateField(new DateFieldConfig() {
    {
        setFieldLabel("Date of birth");
        setName("dob");
        setWidth(190);
        setAllowBlank(false);
    }
}));

form.end();

Button loadBtn = new Button("xml-load-btn", new ButtonConfig() {
    {
        setText("Load");
    }
});
form.addButton(loadBtn);

final Button submitBtn = new Button("xml-submit-btn", new ButtonConfig() {
    {
        setText("Submit");
        setButtonListener(new ButtonListenerAdapter() {
            public void onClick(Button button, EventObject e) {
                form.submit(new FormActionConfig() {
                    {
                        setMethod("GET");
                        setUrl("data/xml-errors.xml");
                        setWaitMsg("Saving Data...");
                    }
                });
            }
        });
    }
});

loadBtn.addButtonListener(new ButtonListenerAdapter() {
    public void onClick(Button button, EventObject e) {
        form.load(new FormActionConfig() {
            {
                setMethod("GET");
                setUrl("data/xml-form.xml");
                setWaitMsg("Loading");
                submitBtn.enable();
            }
        });
    }
});

form.addButton(submitBtn);
form.render();
</textarea>

<script class="javascript">
    dp.SyntaxHighlighter.HighlightAll('code');
</script>
