
<textarea name="code" class="java" style="display:none;">

//create source countried tree
final TreePanel treePanel = new TreePanel("coutries-grouped", new TreePanelConfig() {
    {
        setAnimate(true);
        setEnableDrag(true);
        setEnableDrop(false);
        setContainerScroll(true);
        setRootVisible(true);
    }
});

final XMLTreeLoader loader = new XMLTreeLoader(new XMLTreeLoaderConfig() {
    {
        setDataUrl("countries-grouped.xml");
        setMethod("get");
        setRootTag("countries");
        setFolderTitleMapping("@title");
        setFolderTag("continent");
        setLeafTitleMapping("@title");
        setLeafTag("country");
        setQtipMapping("@qtip");
        setIconMapping("@icon");
    }
});

AsyncTreeNode root = new AsyncTreeNode("Countries", new AsyncTreeNodeConfig() {
    {
        setLoader(loader);
    }
});

treePanel.setRootNode(root);
treePanel.render();

root.expand();
treePanel.expandAll();

//create target vacation tree
final TreePanel tripTreePanel = new TreePanel("vacation-tree", new TreePanelConfig() {
    {
        setAnimate(true);
        setEnableDD(true);
        setContainerScroll(true);
        setRootVisible(true);
    }
});

final XMLTreeLoader tripLoader = new XMLTreeLoader(new XMLTreeLoaderConfig() {
    {
        setDataUrl("trip.xml");
        setMethod("get");
        setRootTag("vacations");
        setFolderIdMapping("@title");
        setFolderTag("trip");
        setQtipMapping("@qtip");
        setIconMapping("@icon");
        setAttributeMappings(new String[]{"@trip"});
    }
});

AsyncTreeNode tripRoot = new AsyncTreeNode("Places to Visit", new AsyncTreeNodeConfig() {
    {
        setLoader(tripLoader);
    }
});

tripTreePanel.setRootNode(tripRoot);
tripTreePanel.render();

tripRoot.expand();
tripTreePanel.expandAll();

//add trip tree listener that handles move / copy logic
tripTreePanel.addTreePanelListener(new TreePanelListenerAdapter() {
    public boolean doBeforeNodeDrop(TreePanel treePanel, TreeNode target, String point, DragDrop source, TreeNode dropNode, DropNodeCallback dropDropNodeCallback) {
        if("true".equals(target.getAttribute("trip"))) {
            if(copyRadio.getValue()) {
                TreeNode copyNode = dropNode.cloneNode();
                dropDropNodeCallback.setDropNode(copyNode);
            }
        }
        return true;
    }
});

</textarea>


<script class="javascript">
    dp.SyntaxHighlighter.HighlightAll('code');
</script>
